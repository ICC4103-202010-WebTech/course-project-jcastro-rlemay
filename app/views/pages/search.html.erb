<%= stylesheet_link_tag "search.css" %>

<h1 class="title">Search</h1>

<section class="query_wrapper">
  <h2 class="subtitle_q">Advanced Query:</h2>
  <div class="query_field">
    <%= form_with url: search_path, method: :get, local: true do |form| %>
      <div class="form-inline">
        <%= form.label :query, "Query: " %>
        <%= form.text_field :query, :placeholder => params[:query], class: "form-control" %>
        <%= form.submit "Search", class: ["btn", "btn-primary"] %>
      </div>
      <div class="form-inline">
        <% categories_array = ["user by name",
                               "user by username",
                               "organization by name",
                               "event by title",
                               "event by description",
                               "event by creator",
                               "event by organization"].map{|ev| [ev]} %>
        <%= form.label :tags, "Search by: " %>
        <%= form.select :tags,  options_for_select(categories_array)%>
      </div>
    <% end %>
  </div>
  <div class="options">

  </div>


</section>

<% if params[:tags] == "user by name" or params[:tags] == nil %>
  <h1 class="subtitle">Users by name:</h1>

  <section class="wrapper">
    <%= render :partial => 'users/user_list', collection: @users_by_name, as: :user %>
  </section>
<% end %>

<% if params[:tags] == "user by username" or params[:tags] == nil %>
  <h1 class="subtitle">Users by username:</h1>

  <section class="wrapper">
    <%= render :partial => 'users/user_list', collection: @users_by_username, as: :user %>
  </section>
<% end %>

<% if params[:tags] == "organization by name" or params[:tags] == nil %>
  <h1 class="subtitle">Organizations by name:</h1>

  <section class="wrapper">
    <%= render :partial => 'organizations/organization_list', collection: @organizations_by_name, as: :organization %>
  </section>
<% end %>

<% if params[:tags] == "event by title" or params[:tags] == nil %>
  <h1 class="subtitle">Events by name:</h1>

  <section class="wrapper">
    <%= render :partial => 'events/events_list', collection: @events_by_title, as: :event %>
  </section>
<% end %>

<% if params[:tags] == "event by description" or params[:tags] == nil %>
  <h1 class="subtitle">Events by description:</h1>

  <section class="wrapper">
    <%= render :partial => 'events/events_list', collection: @events_by_desc, as: :event %>
  </section>
<% end %>

<% if params[:tags] == "event by creator" or params[:tags] == nil %>
  <h1 class="subtitle">Events by Creator:</h1>

  <section class="wrapper">
    <%= render :partial => 'events/events_list', collection: @events_by_creator, as: :event %>
  </section>
<% end %>

<% if params[:tags] == "event by organization" or params[:tags] == nil %>
  <h1 class="subtitle">Events by organization name:</h1>
  <section class="wrapper">
    <%= render :partial => 'events/events_list', collection: @events_by_organization, as: :event %>
  </section>
<% end %>